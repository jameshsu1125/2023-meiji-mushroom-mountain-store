(self.webpackChunk_2023_meiji_mushroom_mountain_store=self.webpackChunk_2023_meiji_mushroom_mountain_store||[]).push([[126,787,219,862],{2735:function(e,n,t){"use strict";t.d(n,{Z:function(){return O}});var r=t(7294),o=t(3379),i=t.n(o),a=t(7795),s=t.n(a),u=t(569),l=t.n(u),c=t(3565),m=t.n(c),d=t(9216),f=t.n(d),p=t(4589),b=t.n(p),g=t(6734),v=t.n(g),h={};h.styleTagTransform=b(),h.setAttributes=m(),h.insert=l().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=f(),i()(v(),h),v()&&v().locals&&v().locals;var x,y=t(2892),j=t.n(y),w=t(5893),O=(0,r.memo)((function(e){var n=e.children,t=e.instruct,o=void 0!==t&&t,i=(0,r.useRef)();return(0,r.useEffect)((function(){return"desktop"===j().get()&&o&&(x=setTimeout((function(){var e;null===(e=i.current)||void 0===e||e.scrollTo(0,800),setTimeout((function(){var e;null===(e=i.current)||void 0===e||e.scrollTo(0,0)}),800)}),2e3),i.current.addEventListener("scroll",(function e(){clearTimeout(x),i.current.removeEventListener("scroll",e)}))),function(){return clearTimeout(x)}}),[o]),(0,w.jsx)("div",{ref:i,className:"Scrollable",children:(0,w.jsx)("div",{className:"w-full h-full flex flex-col justify-start items-center pt-12 lg:pt-5",children:n})})}))},8561:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var r=t(2982),o=t(7294),i=t(3379),a=t.n(i),s=t(7795),u=t.n(s),l=t(569),c=t.n(l),m=t(3565),d=t.n(m),f=t(9216),p=t.n(f),b=t(4589),g=t.n(b),v=t(8283),h=t.n(v),x={};x.styleTagTransform=g(),x.setAttributes=d(),x.insert=c().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=p(),a()(h(),x),h()&&h().locals&&h().locals;var y=t(5893),j=(0,o.memo)((function(){return(0,y.jsx)("div",{className:"Symbols",children:(0,r.Z)(new Array(3).keys()).map((function(e){return(0,y.jsx)("div",{},"symbols".concat(e))}))})}))},5787:function(e,n,t){"use strict";t.d(n,{GL:function(){return h},iQ:function(){return b},D2:function(){return v},_H:function(){return p},eu:function(){return g}});var r=t(7294),o=t(885),i=t(5671),a=t(3144),s=t(1766),u=t.p+"bundle/audio/pages/game/mp3/bamboo.mp3",l=t.p+"bundle/audio/pages/game/mp3/bgm.mp3",c=t.p+"bundle/audio/pages/game/mp3/falling.mp3",m=t.p+"bundle/audio/pages/game/mp3/move.mp3",d=t.p+"bundle/audio/pages/game/mp3/mushroom.mp3",f=function(){function e(n){(0,i.Z)(this,e),this.onLoaded=function(){},this.tracks={},this.sounds=[{url:l,name:n.bgm,loop:!0,volume:.5},{url:u,name:n.bamboo,loop:!1,volume:1},{url:d,name:n.mushroom,loop:!1,volume:1},{url:c,name:n.falling,loop:!1,volume:1},{url:m,name:n.move,loop:!0,volume:1}],this.isMute=!1}return(0,a.Z)(e,[{key:"eachSoundLoad",value:function(e){this.tracks[e].loaded=!0,Object.values(this.tracks).filter((function(e){return e.loaded})).length===this.sounds.length&&this.onLoaded()}},{key:"loadSound",value:function(e){var n=this;this.onLoaded=e,this.tracks=Object.fromEntries(this.sounds.map((function(e){var t=new s.Howl({src:[e.url],autoplay:!1,loop:e.loop,volume:e.volume,onload:function(){return n.eachSoundLoad(e.name)}});return[e.name,{sound:t,loaded:!1}]})))}},{key:"mute",value:function(){Object.values(this.tracks).forEach((function(e){e.sound.volume(0)}))}},{key:"unmute",value:function(){var e=this;Object.entries(this.tracks).forEach((function(n){var t=(0,o.Z)(n,2),r=t[0],i=t[1],a=e.sounds.filter((function(e){return String(e.name)===r})),s=(0,o.Z)(a,1)[0].volume;i.sound.volume(s)}))}},{key:"switch",value:function(){this.isMute=!this.isMute,this.isMute?this.mute():this.unmute()}}]),e}(),p={unset:0,loaded:1,modelLoaded:2,didFadeIn:3},b={home:"/home",intro:"/intro",game:"/game",result:"/result",form:"/form",submitted:"/submitted"},g={bgm:0,bamboo:1,mushroom:2,move:3,falling:4},v={steps:p.unset,page:b.home,sounds:new f(g),soundsLoaded:!1,score:0,countdown:!1,over:!1,replay:!1},h=(0,r.createContext)(v)},2126:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return H}});var r=t(2982),o=t(4942),i=t(885),a=t(9214),s=t.n(a),u=t(8151),l=t(7294),c=t(3954),m=t(437),d=t(558),f=t(1393),p=t(2735),b=t(8561),g=t(2517),v=t(5861),h=t(4687),x=t.n(h),y=t(7868),j=t(1509),w=t(3295);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S=t(5787),Z=t(3379),P=t.n(Z),_=t(7795),E=t.n(_),N=t(569),A=t.n(N),L=t(3565),F=t.n(L),D=t(9216),T=t.n(D),G=t(4589),M=t.n(G),$=t(4221),z=t.n($),C={};C.styleTagTransform=M(),C.setAttributes=F(),C.insert=A().bind(null,"head"),C.domAPI=E(),C.insertStyleElement=T(),P()(z(),C),z()&&z().locals&&z().locals;var q=t(5893);function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var H=(0,l.memo)((function(){var e=(0,l.useRef)(),n=function(){var e,n=(0,l.useContext)(j._y),t=(0,i.Z)(n,2)[1],r=(0,l.useState)(),a=(0,i.Z)(r,2),s=a[0],u=a[1];return[s,function(n){return(e=e||(0,v.Z)(x().mark((function e(n){var r,i,a,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object.entries(n).map((function(e){if(!(0,w.Kl[e[0]])(e[1])){var n=Object.entries(w.$S).filter((function(n){return n[1]===e[0]}));return(0,o.Z)({},n[0][0],!1)}var t=Object.entries(w.$S).filter((function(n){return n[1]===e[0]}));return(0,o.Z)({},t[0][0],!0)})),0===(i=r.filter((function(e){return!Object.values(e)[0]})).map((function(e){return Object.keys(e)[0]}))).length){e.next=5;break}return alert((l=i.join(", "),"以下資料格式不正確或是未填寫\n".concat(l,"\n請確認後再試一次。"))),e.abrupt("return");case 5:t({type:w.om.loadingProcess,state:{enabled:!0}}),delete(a=k({},n))[w.$S.同意辦法],a[w.$S.稱呼]=Number(a[w.$S.稱呼]),a[w.$S.年齡區間]=Number(a[w.$S.年齡區間]),e.next=14;break;case 14:return e.next=16,y.ZP.post("/SaveUserInfo",a);case 16:s=e.sent,u(s);case 18:t({type:w.om.loadingProcess,state:{enabled:!1}});case 19:case"end":return e.stop()}var l}),e)})))).apply(this,arguments)}]}(),t=(0,i.Z)(n,2),a=t[0],h=t[1],O=(0,l.useContext)(S.GL),Z=(0,i.Z)(O,2),P=Z[0],_=Z[1],E=P.sounds,N=(0,l.useMemo)((function(){return Object.entries(w.$S).map((function(e){return e}))}),[]);(0,l.useEffect)((function(){a&&(a.Result?_((function(e){return U(U({},e),{},{page:S.iQ.submitted})})):alert(a.MessageList.join(", ")))}),[a]),(0,l.useEffect)((function(){var e;null==E||null===(e=E.tracks[S.eu.bgm])||void 0===e||e.sound.fade(E.isMute?0:E.sounds[0].volume,0,1e3),s().addPreventExcept(".GameForm")}),[]);var A=(0,l.useCallback)((function(n){n.preventDefault();var t=e.current.value(),o=new FormData(n.target);o.append("agree",t?"1":"0"),h(Object.fromEntries((0,r.Z)(o))),u.Z.event(j.UZ.game.填單抽回饋禮頁.page,j.UZ.game.填單抽回饋禮頁.event.確認送出)}),[]);return(0,l.useEffect)((function(){u.Z.pv(j.UZ.game.填單抽回饋禮頁.page)}),[]),(0,q.jsx)("div",{className:"GameForm",children:(0,q.jsxs)(p.Z,{children:[(0,q.jsx)(b.Z,{}),(0,q.jsx)("div",{className:"w-full px-24 py-10",children:(0,q.jsxs)(m.S,{children:[(0,q.jsx)("div",{className:"title"}),(0,q.jsxs)("form",{onSubmit:A,children:[(0,q.jsx)("div",{className:"subtitle"}),(0,q.jsxs)("div",{className:"inputs",children:[(0,q.jsx)("div",{className:"note",children:"欄位皆為必填"}),(0,q.jsxs)("div",{className:"space-y-5",children:[(0,q.jsx)(d.Z,{labelName:N[0],placeholder:"請輸入真實姓名",type:"text",required:!0}),(0,q.jsx)(d.Z,{labelName:N[1],type:"radio",required:!0}),(0,q.jsx)(d.Z,{labelName:N[2],placeholder:"請選擇",type:"select",required:!0}),(0,q.jsx)(d.Z,{labelName:N[3],placeholder:"請輸入聯絡手機",type:"tel",required:!0}),(0,q.jsx)(d.Z,{labelName:N[4],placeholder:"請輸入E-mail",type:"email",required:!0})]})]}),(0,q.jsxs)("div",{className:"mb-8 mt-5 w-full",children:[(0,q.jsx)(g.Z,{ref:e}),(0,q.jsx)(f.Z,{})]}),(0,q.jsx)(c.Z,{width:"160px",maxWidth:"100%",type:"submit",children:"確認送出"})]})]})})]})})}))},6734:function(e,n,t){var r=t(8081),o=t(3645),i=t(1667),a=t(6898),s=o(r),u=i(a);s.push([e.id,".Scrollable {\n  overflow-x: hidden;\n  overflow-y: auto;\n  background-image: url("+u+");\n  background-position: center bottom;\n  background-size: 2400px;\n  background-repeat: no-repeat;\n  scroll-behavior: smooth;\n  height: 100%;\n  width: 100%;\n}\n",""]),e.exports=s},8283:function(e,n,t){var r=t(8081),o=t(3645),i=t(1667),a=t(4931),s=o(r),u=i(a);s.push([e.id,".Symbols {\n  pointer-events: none;\n  position: absolute;\n  top: 0px;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n.Symbols > div {\n  width: 205px;\n  height: 115px;\n  background-image: url("+u+");\n  background-size: 100%;\n  -webkit-animation: cloud_8_r15 20s ease-in-out infinite;\n          animation: cloud_8_r15 20s ease-in-out infinite;\n  position: absolute;\n}\n.Symbols > div:nth-child(1) {\n  top: 0%;\n  left: 50%;\n  margin-top: 370px;\n  margin-left: -460px;\n  -webkit-animation-duration: -5s;\n          animation-duration: -5s;\n}\n.Symbols > div:nth-child(2) {\n  top: 0%;\n  left: 50%;\n  margin-top: 160px;\n  margin-left: 301px;\n  width: 164px;\n  height: 92px;\n  -webkit-animation-duration: -10s;\n          animation-duration: -10s;\n}\n.Symbols > div:nth-child(3) {\n  top: 0%;\n  left: 50%;\n  margin-top: 710px;\n  margin-left: 270px;\n  -webkit-animation-duration: -10s;\n          animation-duration: -10s;\n  animation-direction: reverse;\n}\n",""]),e.exports=s},4221:function(e,n,t){var r=t(8081),o=t(3645),i=t(1667),a=t(4441),s=t(4713),u=o(r),l=i(a),c=i(s);u.push([e.id,".GameForm {\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n}\n.GameForm .title {\n  padding-bottom: 40.77540107%;\n  width: 100%;\n  background-image: url("+l+");\n  background-size: cover;\n}\n.GameForm .subtitle {\n  margin-top: 1.5rem;\n  margin-bottom: 1.5rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  padding-left: 4rem;\n  padding-right: 4rem;\n}\n.GameForm .subtitle::after {\n  padding-bottom: 16.55737705%;\n  width: 100%;\n  background-image: url("+c+");\n  background-size: cover;\n  content: '';\n}\n.GameForm .inputs {\n  margin-top: 1.25rem;\n  margin-bottom: 1.25rem;\n}\n.GameForm .note {\n  color: #636363;\n  margin-bottom: 0.75rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  text-align: left;\n  font-size: 1.5rem;\n  line-height: 2rem;\n}\n.GameForm .note::before {\n  content: '*';\n  --tw-text-opacity: 1;\n  color: rgba(255, 0, 0, 1);\n  color: rgba(255, 0, 0, var(--tw-text-opacity));\n}\n",""]),e.exports=u},4931:function(e,n,t){"use strict";t.r(n),n.default=t.p+"bundle/image/components/symbols/img/cloud-1.png"},4713:function(e,n,t){"use strict";t.r(n),n.default=t.p+"bundle/image/pages/game/form/img/subtitle.png"},4441:function(e,n,t){"use strict";t.r(n),n.default=t.p+"bundle/image/pages/game/form/img/title.png"},6898:function(e,n,t){"use strict";t.r(n),n.default=t.p+"bundle/image/pages/img/smallHill.png"},2892:function(e,n,t){var r,o,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};r=[t,n,t(2437)],o=function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t=i(t);var r={get:function(e){void 0===e&&(e=!1);var n=new t.default(window.navigator.userAgent);return n.tablet()?e?"desktop":"mobile":n.mobile()?"mobile":"desktop"},facebook:function(){var e=navigator.userAgent||navigator.vendor;return e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1},ios:function(){return"iOS"==new t.default(window.navigator.userAgent).os()},android:function(){return"AndroidOS"==new t.default(window.navigator.userAgent).os()},line:function(){var e=navigator.userAgent||navigator.vendor;return e.indexOf("Line")>-1||e.indexOf("Line")>-1},mac:function(){return(navigator.userAgent||navigator.vendor).indexOf("Mac OS X")>-1},pc:function(){return(navigator.userAgent||navigator.vendor).indexOf("Mac OS X")<0}};n.default=r}.apply(n,r),void 0===o||(e.exports=o)}}]);