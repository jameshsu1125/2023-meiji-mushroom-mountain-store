(self.webpackChunk_2023_meiji_mushroom_mountain_store=self.webpackChunk_2023_meiji_mushroom_mountain_store||[]).push([[909,142],{3314:function(e,t,n){"use strict";n.d(t,{Gh:function(){return a},Jm:function(){return o},xh:function(){return i}});var r=n(7294),o={home:"/home",submitted:"/submitted"},i={steps:0,page:o.home},a=(0,r.createContext)(i)},7909:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var r=n(2982),o=n(4942),i=n(885),a=n(9214),c=n.n(a),s=n(7294),u=n(3954),l=n(437),m=n(558),p=n(1393),f=n(2517),b=n(5861),d=n(4687),x=n.n(d),j=n(7868),y=n(1509),h=n(3295);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=n(3314),w=n(3379),Z=n.n(w),P=n(7795),k=n.n(P),N=n(569),S=n.n(N),E=n(3565),I=n.n(E),W=n(9216),_=n.n(W),D=n(4589),q=n.n(D),C=n(6689),H=n.n(C),A={};A.styleTagTransform=q(),A.setAttributes=I(),A.insert=S().bind(null,"head"),A.domAPI=k(),A.insertStyleElement=_(),Z()(H(),A),H()&&H().locals&&H().locals;var T=n(5893);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=(0,s.memo)((function(){var e=(0,s.useRef)(),t=function(){var e=(0,s.useContext)(y._y),t=(0,i.Z)(e,2)[1],n=(0,s.useState)(),r=(0,i.Z)(n,2),a=r[0],c=r[1],u=function(){var e=(0,b.Z)(x().mark((function e(n){var r,i,a,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object.entries(n).map((function(e){if(!(0,h.Kl[e[0]])(e[1])){var t=Object.entries(h.xW).filter((function(t){return t[1]===e[0]}));return(0,o.Z)({},t[0][0],!1)}var n=Object.entries(h.xW).filter((function(t){return t[1]===e[0]}));return(0,o.Z)({},n[0][0],!0)})),0===(i=r.filter((function(e){return!Object.values(e)[0]})).map((function(e){return Object.keys(e)[0]}))).length){e.next=5;break}return alert((u=i.join(", "),"以下資料格式不正確或是未填寫\n".concat(u,"\n請確認後再試一次。"))),e.abrupt("return");case 5:t({type:h.om.loadingProcess,state:{enabled:!0}}),delete(a=g({},n))[h.xW.同意辦法],a[h.xW.發票號碼]=a[h.xW.發票號碼].toUpperCase(),a[h.xW.稱呼]=Number(a[h.xW.稱呼]),a[h.xW.年齡區間]=Number(a[h.xW.年齡區間]),setTimeout((function(){return c(y.up)}),2e3),e.next=19;break;case 15:return e.next=17,j.ZP.post("/SaveInvoice",a);case 17:s=e.sent,c(s);case 19:t({type:h.om.loadingProcess,state:{enabled:!1}});case 20:case"end":return e.stop()}var u}),e)})));return function(t){return e.apply(this,arguments)}}();return[a,u]}(),n=(0,i.Z)(t,2),a=n[0],d=n[1],v=(0,s.useContext)(O.Gh),w=(0,i.Z)(v,2)[1],Z=(0,s.useMemo)((function(){return Object.entries(h.xW).map((function(e){return e}))}),[]);(0,s.useEffect)((function(){a&&(a.Result?w((function(e){return G(G({},e),{},{page:O.Jm.submitted})})):alert(a.MessageList.join(", ")))}),[a]),(0,s.useEffect)((function(){c().addPreventExcept(".InvoiceHome")}),[]);var P=(0,s.useCallback)((function(t){t.preventDefault();var n=e.current.value(),o=new FormData(t.target);o.append("agree",n?"1":"0"),d(Object.fromEntries((0,r.Z)(o)))}),[]);return(0,T.jsx)("div",{className:"InvoiceHome",children:(0,T.jsxs)(l.S,{children:[(0,T.jsx)("div",{className:"title"}),(0,T.jsxs)("form",{onSubmit:P,children:[(0,T.jsxs)("div",{className:"inputs",children:[(0,T.jsx)("div",{className:"note",children:"欄位皆為必填"}),(0,T.jsxs)("div",{className:"space-y-5",children:[(0,T.jsx)(m.Z,{labelName:Z[0],placeholder:"請輸入真實姓名",type:"text",required:!0}),(0,T.jsx)(m.Z,{labelName:Z[1],type:"radio",required:!0}),(0,T.jsx)(m.Z,{labelName:Z[2],placeholder:"請選擇",type:"select",required:!0}),(0,T.jsx)(m.Z,{labelName:Z[3],placeholder:"請輸入聯絡手機",type:"tel",required:!0}),(0,T.jsx)(m.Z,{labelName:Z[4],placeholder:"請輸入E-mail",type:"email",required:!0}),(0,T.jsx)(m.Z,{labelName:Z[6],placeholder:"英文2碼＋數字8碼",type:"text",required:!0}),(0,T.jsx)(m.Z,{labelName:Z[7],placeholder:"數字4碼",type:"text",required:!0,code:!0})]})]}),(0,T.jsxs)("div",{className:"mb-8 mt-5 w-full",children:[(0,T.jsx)(f.Z,{ref:e}),(0,T.jsx)(p.Z,{})]}),(0,T.jsx)(u.Z,{width:"160px",maxWidth:"100%",type:"submit",children:"確認送出"})]})]})})}))},6689:function(e,t,n){var r=n(8081),o=n(3645),i=n(1667),a=n(5553),c=o(r),s=i(a);c.push([e.id,".InvoiceHome {\n  width: 100%;\n  padding-left: 6rem;\n  padding-right: 6rem;\n  padding-top: 2.5rem;\n  padding-bottom: 2.5rem;\n}\n.InvoiceHome .inputs {\n  margin-top: 1.25rem;\n  margin-bottom: 1.25rem;\n}\n.InvoiceHome .title {\n  padding-bottom: 13.37748344%;\n  width: 100%;\n  background-image: url("+s+");\n  background-size: cover;\n  margin-top: 1.5rem;\n  margin-bottom: 1.5rem;\n}\n.InvoiceHome .note {\n  color: #636363;\n  margin-bottom: 0.75rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  text-align: left;\n  font-size: 1.5rem;\n  line-height: 2rem;\n}\n.InvoiceHome .note::before {\n  content: '*';\n  --tw-text-opacity: 1;\n  color: rgba(255, 0, 0, 1);\n  color: rgba(255, 0, 0, var(--tw-text-opacity));\n}\n",""]),e.exports=c},5553:function(e,t,n){"use strict";n.r(t),t.default=n.p+"bundle/image/pages/invoice/home/img/title.png"},2982:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907),o=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);